<div
  class="min-h-screen flex flex-col items-center justify-center bg-gray-50 dark:bg-gray-900 py-8 px-4"
>
  <div class="max-w-md w-full">
    <h1
      class="text-3xl font-bold mb-2 text-center text-gray-900 dark:text-white"
    >
      Reset Your Password
    </h1>
    <p class="text-gray-600 dark:text-gray-400 text-center mb-6">
      Follow the steps to reset your password
    </p>

    <% if (error) { %>
    <div
      class="mb-6 p-3 border border-red-200 bg-red-50 dark:bg-red-900/20 dark:border-red-800 rounded-lg"
    >
      <p class="text-red-700 dark:text-red-400 text-sm font-medium">
        <%= error %>
      </p>
    </div>
    <% } %> <% if (success) { %>
    <div
      class="mb-6 p-3 border border-green-200 bg-green-50 dark:bg-green-900/20 dark:border-green-800 rounded-lg"
    >
      <p class="text-green-700 dark:text-green-400 text-sm font-medium">
        <%= success %>
      </p>
    </div>
    <% } %> <% if (stage === 1) { %>
    <form
      action="/users/forgotPassword"
      method="POST"
      class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow border space-y-4"
    >
      <div>
        <label
          for="email"
          class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
          >Email Address</label
        >
        <input
          type="email"
          name="email"
          id="email"
          required
          class="shadow-xs bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:text-white"
          placeholder="name@example.com"
        />
      </div>
      <button
        type="submit"
        class="w-full text-white bg-blue-700 hover:bg-blue-800 rounded-lg text-sm px-5 py-2.5"
      >
        Send Verification Code
      </button>
    </form>
    <% } %> <% if (stage === 2) { %>
    <form
      action="/users/forgotPassword"
      method="POST"
      class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow border space-y-4"
    >
      <input
        type="hidden"
        name="email"
        value="<%= typeof email !== 'undefined' ? email : '' %>"
      />
      <div>
        <label
          for="code"
          class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
          >Verification Code</label
        >
        <input
          type="text"
          name="code"
          id="code"
          maxlength="6"
          required
          class="shadow-xs bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:text-white text-center tracking-widest text-lg font-mono"
          placeholder="000000"
        />
      </div>
      <button
        type="submit"
        class="w-full text-white bg-blue-700 hover:bg-blue-800 rounded-lg text-sm px-5 py-2.5"
      >
        Verify Code
      </button>
    </form>
    <% } %> <% if (stage === 3) { %>
    <form
      action="/users/forgotPassword"
      method="POST"
      class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow border space-y-4"
    >
      <input
        type="hidden"
        name="email"
        value="<%= typeof email !== 'undefined' ? email : '' %>"
      />

      <div>
        <label
          for="newPassword"
          class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
          >New Password</label
        >
        <input
          type="password"
          name="newPassword"
          id="newPassword"
          required
          class="shadow-xs bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:text-white"
        />
      </div>

      <div>
        <label
          for="confirmPassword"
          class="block mb-2 text-sm font-medium text-gray-900 dark:text-white"
          >Confirm Password</label
        >
        <input
          type="password"
          name="confirmPassword"
          id="confirmPassword"
          required
          class="shadow-xs bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:text-white"
        />
      </div>

      <button
        type="submit"
        class="w-full text-white bg-green-700 hover:bg-green-800 rounded-lg text-sm px-5 py-2.5"
      >
        Reset Password
      </button>
    </form>

    <div class="text-center mt-4">
      <a
        href="/login"
        class="text-sm text-blue-600 hover:underline dark:text-blue-400"
      >
        ‚Üê Back to Login
      </a>
    </div>
    <% } %>
  </div>
</div>
